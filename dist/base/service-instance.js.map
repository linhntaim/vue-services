{"version":3,"sources":["../../src/base/service-instance.js"],"names":["ServiceInstance","instance","paramsCallbacks","instanceCallbacks","prototype","constructor","name","Object","keys","forEach","params","callback"],"mappings":"4tBAAaA,CAAAA,e,yBACT,yBAAYC,QAAZ,CAAsB,uCAClB,KAAKA,QAAL,CAAgBA,QAAhB,CACA,KAAKC,eAAL,CAAuB,EAAvB,CACA,KAAKC,iBAAL,CAAyB,EAC5B,C,uDAED,sBAAc,gBACV,GAAIF,CAAAA,QAAQ,CAAG,MAAO,MAAKA,QAAZ,GAAyB,UAAzB,EAAuC,KAAKA,QAAL,CAAcG,SAAd,CAAwBC,WAAxB,CAAoCC,IAApC,GAA6C,UAApF,CACX,KAAKL,QAAL,EADW,CACO,KAAKA,QAD3B,CAEAM,MAAM,CAACC,IAAP,CAAY,KAAKL,iBAAjB,EAAoCM,OAApC,CAA4C,SAAAH,IAAI,QAAIL,CAAAA,QAAQ,CAAG,KAAI,CAACE,iBAAL,CAAuBG,IAAvB,EAA6BL,QAA7B,CAAf,CAAhD,EACA,MAAOA,CAAAA,QACV,C,yBAED,mBAAUS,MAAV,CAAkB,iBACdH,MAAM,CAACC,IAAP,CAAY,KAAKN,eAAjB,EAAkCO,OAAlC,CAA0C,SAAAH,IAAI,QAAII,CAAAA,MAAM,CAAG,MAAI,CAACR,eAAL,CAAqBI,IAArB,EAA2BI,MAA3B,CAAb,CAA9C,EACA,MAAOA,CAAAA,MACV,C,mCAED,6BAAoBJ,IAApB,CAA0BK,QAA1B,CAAoC,CAChC,GAAI,MAAO,MAAKV,QAAZ,GAAyB,UAA7B,CAAyC,CACrC,KAAKE,iBAAL,CAAuBG,IAAvB,EAA+BK,QAClC,CAFD,IAEO,CACH,KAAKV,QAAL,CAAgBU,QAAQ,CAAC,KAAKV,QAAN,CAC3B,CACD,MAAO,KACV,C,sCAED,gCAAuBK,IAAvB,CAA6B,CACzB,GAAIA,IAAI,GAAI,MAAKH,iBAAjB,CAAoC,CAChC,MAAO,MAAKA,iBAAL,CAAuBG,IAAvB,CACV,CACD,MAAO,KACV,C,iCAED,2BAAkBA,IAAlB,CAAwBK,QAAxB,CAAkC,CAC9B,KAAKT,eAAL,CAAqBI,IAArB,EAA6BK,QAA7B,CACA,MAAO,KACV,C,oCAED,8BAAqBL,IAArB,CAA2B,CACvB,GAAIA,IAAI,GAAI,MAAKJ,eAAjB,CAAkC,CAC9B,MAAO,MAAKA,eAAL,CAAqBI,IAArB,CACV,CACD,MAAO,KACV,C","sourcesContent":["export class ServiceInstance {\r\n    constructor(instance) {\r\n        this.instance = instance\r\n        this.paramsCallbacks = {}\r\n        this.instanceCallbacks = {}\r\n    }\r\n\r\n    getInstance() {\r\n        let instance = typeof this.instance === 'function' && this.instance.prototype.constructor.name === 'instance' ?\r\n            this.instance() : this.instance\r\n        Object.keys(this.instanceCallbacks).forEach(name => instance = this.instanceCallbacks[name](instance))\r\n        return instance\r\n    }\r\n\r\n    getParams(params) {\r\n        Object.keys(this.paramsCallbacks).forEach(name => params = this.paramsCallbacks[name](params))\r\n        return params\r\n    }\r\n\r\n    addInstanceCallback(name, callback) {\r\n        if (typeof this.instance === 'function') {\r\n            this.instanceCallbacks[name] = callback\r\n        } else {\r\n            this.instance = callback(this.instance)\r\n        }\r\n        return this\r\n    }\r\n\r\n    removeInstanceCallback(name) {\r\n        if (name in this.instanceCallbacks) {\r\n            delete this.instanceCallbacks[name]\r\n        }\r\n        return this\r\n    }\r\n\r\n    addParamsCallback(name, callback) {\r\n        this.paramsCallbacks[name] = callback\r\n        return this\r\n    }\r\n\r\n    removeParamsCallback(name) {\r\n        if (name in this.paramsCallbacks) {\r\n            delete this.paramsCallbacks[name]\r\n        }\r\n        return this\r\n    }\r\n}"],"file":"service-instance.js"}