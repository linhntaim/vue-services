{"version":3,"sources":["../../src/base/service-instance.js"],"names":["ServiceInstance","constructor","instance","paramsCallbacks","instanceCallbacks","getInstance","prototype","name","Object","keys","forEach","getParams","params","addInstanceCallback","callback","removeInstanceCallback","addParamsCallback","removeParamsCallback"],"mappings":"AAAA,MAAO,MAAMA,CAAAA,eAAgB,CACzBC,WAAW,CAACC,QAAD,CAAW,CAClB,KAAKA,QAAL,CAAgBA,QAAhB,CACA,KAAKC,eAAL,CAAuB,EAAvB,CACA,KAAKC,iBAAL,CAAyB,EAC5B,CAEDC,WAAW,EAAG,CACV,GAAIH,CAAAA,QAAQ,CAAG,MAAO,MAAKA,QAAZ,GAAyB,UAAzB,EAAuC,CAAC,KAAKA,QAAL,CAAcI,SAAd,CAAwBL,WAAxB,CAAoCM,IAA5E,CACX,KAAKL,QAAL,EADW,CACO,KAAKA,QAD3B,CAEAM,MAAM,CAACC,IAAP,CAAY,KAAKL,iBAAjB,EAAoCM,OAApC,CAA4CH,IAAI,EAAIL,QAAQ,CAAG,KAAKE,iBAAL,CAAuBG,IAAvB,EAA6BL,QAA7B,CAA/D,EACA,MAAOA,CAAAA,QACV,CAEDS,SAAS,CAACC,MAAD,CAAS,CACdJ,MAAM,CAACC,IAAP,CAAY,KAAKN,eAAjB,EAAkCO,OAAlC,CAA0CH,IAAI,EAAIK,MAAM,CAAG,KAAKR,iBAAL,CAAuBG,IAAvB,EAA6BK,MAA7B,CAA3D,EACA,MAAOA,CAAAA,MACV,CAEDC,mBAAmB,CAACN,IAAD,CAAOO,QAAP,CAAiB,CAChC,GAAI,MAAO,MAAKZ,QAAZ,GAAyB,UAA7B,CAAyC,CACrC,KAAKE,iBAAL,CAAuBG,IAAvB,EAA+BO,QAClC,CAFD,IAEO,CACH,KAAKZ,QAAL,CAAgBY,QAAQ,CAAC,KAAKZ,QAAN,CAC3B,CACD,MAAO,KACV,CAEDa,sBAAsB,CAACR,IAAD,CAAO,CACzB,GAAIA,IAAI,GAAI,MAAKH,iBAAjB,CAAoC,CAChC,MAAO,MAAKA,iBAAL,CAAuBG,IAAvB,CACV,CACD,MAAO,KACV,CAEDS,iBAAiB,CAACT,IAAD,CAAOO,QAAP,CAAiB,CAC9B,KAAKX,eAAL,CAAqBI,IAArB,EAA6BO,QAA7B,CACA,MAAO,KACV,CAEDG,oBAAoB,CAACV,IAAD,CAAO,CACvB,GAAIA,IAAI,GAAI,MAAKJ,eAAjB,CAAkC,CAC9B,MAAO,MAAKA,eAAL,CAAqBI,IAArB,CACV,CACD,MAAO,KACV,CA7CwB","sourcesContent":["export class ServiceInstance {\r\n    constructor(instance) {\r\n        this.instance = instance\r\n        this.paramsCallbacks = {}\r\n        this.instanceCallbacks = {}\r\n    }\r\n\r\n    getInstance() {\r\n        let instance = typeof this.instance === 'function' && !this.instance.prototype.constructor.name ?\r\n            this.instance() : this.instance\r\n        Object.keys(this.instanceCallbacks).forEach(name => instance = this.instanceCallbacks[name](instance))\r\n        return instance\r\n    }\r\n\r\n    getParams(params) {\r\n        Object.keys(this.paramsCallbacks).forEach(name => params = this.instanceCallbacks[name](params))\r\n        return params\r\n    }\r\n\r\n    addInstanceCallback(name, callback) {\r\n        if (typeof this.instance === 'function') {\r\n            this.instanceCallbacks[name] = callback\r\n        } else {\r\n            this.instance = callback(this.instance)\r\n        }\r\n        return this\r\n    }\r\n\r\n    removeInstanceCallback(name) {\r\n        if (name in this.instanceCallbacks) {\r\n            delete this.instanceCallbacks[name]\r\n        }\r\n        return this\r\n    }\r\n\r\n    addParamsCallback(name, callback) {\r\n        this.paramsCallbacks[name] = callback\r\n        return this\r\n    }\r\n\r\n    removeParamsCallback(name) {\r\n        if (name in this.paramsCallbacks) {\r\n            delete this.paramsCallbacks[name]\r\n        }\r\n        return this\r\n    }\r\n}"],"file":"service-instance.js"}